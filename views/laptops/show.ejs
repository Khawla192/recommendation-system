<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/show.css" />
    <title>
        <%= laptops.find(l => l._id === laptopId).name %>
    </title>
</head>

<body>
    <%- include('../partials/_navbar.ejs') %>

        <div class="container">
            <div class="header">
                <h1>
                    <%= laptop.name %>
                </h1>
            </div>
            <div class="info">
                <div class="picture">
                    <% laptop.images.forEach(image=> { %>
                        <img src="<%= image %>" alt="<%= laptop.name %>">
                    <% }); %>
                </div>
                <div class="details">
                    <p><strong>Brand:</strong>
                        <%= laptop.brand %>
                    </p>
                    <p><strong>Category:</strong>
                        <%= laptop.category %>
                    </p>
                    <p><strong>Display:</strong>
                        <%= laptop.screenSize %>, <%= laptop.resolution %>
                                <% if (laptop.touchscreen) { %>
                                    , Touchscreen 
                                <% } %>
                    </p>
                    <p><strong>Processor:</strong>
                        <%= laptop.processor %>
                    </p>
                    <p><strong>RAM:</strong>
                        <%= laptop.ram %>
                    </p>
                    <% if (laptop.storage) { %>
                        <p><strong>Storage:</strong>
                            <%= laptop.storage %>
                                <% if (laptop.storageSize) { %> 
                                    (<%= laptop.storageSize %> GB)
                                <% } %>
                        </p>
                        <% } %>
                            <% if (laptop.graphics) { %>
                                <p><strong>Graphics:</strong>
                                    <%= laptop.graphics %>
                                </p>
                                <% } %>
                                    <% if (laptop.os) { %>
                                        <p><strong>OS:</strong>
                                            <%= laptop.os %>
                                        </p>
                                        <% } %>
                                            <% if (laptop.weight) { %>
                                                <p><strong>Weight:</strong>
                                                    <%= laptop.weight %> kg
                                                </p>
                                                <% } %>
                </div>

            </div>
            
            <% if (laptop.reviews && laptop.reviews.length> 0) { %>
                <div class="reviews">
                    <h2>Reviews</h2>
                    <% laptop.reviews.forEach(review=> { %>
                        <div class="review">
                            <p><strong>Rating:</strong>
                                <%= review.rating %>/10
                            </p>
                            <p>
                                <%= review.text %>
                            </p>
                        </div>
                        <% }); %>
                </div>
                <% } %>

                <div class="actions">
                    <a href="/users/<%= user._id %>/laptops/<%=laptop._id%>/edit">Edit</a>
                    <form action="/users/<%= user._id %>/laptops/<%=laptop._id%>?_method=DELETE" method="POST">
                        <button type="submit">Delete <%=laptop.name%></button>
                    </form>
                    <a href="/users/<%=user._id%>/laptops">Back to Homepage</a>
                </div>
        </div>
</body>

</html>